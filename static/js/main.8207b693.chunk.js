(this["webpackJsonpmamabal-client"]=this["webpackJsonpmamabal-client"]||[]).push([[0],{36:function(e,t,a){e.exports=a(51)},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),u=a.n(c),l=a(2),i=a(8),o=i,s=(o.default,o.css,o.createGlobalStyle),m=(o.keyframes,o.ThemeProvider),f={blueColor:"#3498db"},p=a(10),d=a(33);function b(){var e=Object(p.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Kosugi&display=swap');\n  ","\n  * {\n    font-family: 'Kosugi', sans-serif;\n  }\n"]);return b=function(){return e},e}var E=s(b(),d.a),v=a(13);a(42),a(44),a(52);v.initializeApp({apiKey:"AIzaSyCzPqJU3h1OlQPwoJq5ZhP7MeDwac_3zvs",authDomain:"mamabal.firebaseapp.com",databaseURL:"https://mamabal.firebaseio.com",projectId:"mamabal",storageBucket:"mamabal.appspot.com",messagingSenderId:"545806454842",appId:"1:545806454842:web:c825648cfbb1fd47436503"});var h=v,O=v.auth(),j=v.firestore(),g=v.storage(),w=a(17),x=a(3),y=a(4),S=a.n(y),k=a(9),C=a(12),I=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),i=Object(l.a)(u,2),o=i[0],s=i[1],m=Object(n.useState)(!0),f=Object(l.a)(m,2),p=f[0],d=f[1],b=Object(n.useState)(""),E=Object(l.a)(b,2),v=E[0],j=E[1],g=function(e){var t=e.currentTarget,a=t.name,n=t.value;"email"===a?c(n):"password"===a&&s(n)},w=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(a,o);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(a,o);case 10:n=e.sent;case 11:console.log(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),j(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(k.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.currentTarget.name&&(a=new h.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null,r.a.createElement("title",null,"Login | Mamabal")),r.a.createElement("form",{onSubmit:w},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:g}),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:g}),r.a.createElement("input",{type:"submit",value:p?"Create Account":"Sign in"}),v&&r.a.createElement("span",null,v)),r.a.createElement("span",{onClick:function(){return d((function(e){return!e}))}},p?"Sign in":"Create Acount"),r.a.createElement("div",null,r.a.createElement("button",{onClick:x,name:"google"},"Continue with Google")))},P=function(e){var t=e.userObj;return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(w.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/profile"},t.displayName))))},U=a(20),M=function(e){var t=e.mwitObj,a=e.isOwner,c=Object(n.useState)(!1),u=Object(l.a)(c,2),i=u[0],o=u[1],s=Object(n.useState)(t.text),m=Object(l.a)(s,2),f=m[0],p=m[1],d=function(){var e=Object(k.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u672c\u5f53\u306b\u53d6\u308a\u6d88\u3057\u307e\u3059\u304b\uff1f")){e.next=6;break}return e.next=4,j.doc("mwits/".concat(t.id)).delete();case 4:return e.next=6,g.refFromURL(t.attachmentUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){return o((function(e){return!e}))},E=function(){var e=Object(k.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,j.doc("mwits/".concat(t.id)).update({text:f});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"text",placeholder:"\u66f4\u65b0\u5185\u5bb9",value:f,required:!0,onChange:function(e){var t=e.currentTarget.value;p(t)}}),r.a.createElement("input",{type:"submit",value:"\u7de8\u96c6"})),r.a.createElement("button",{onClick:b},"\u30ad\u30e3\u30f3\u30bb\u30eb")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,t.text),t.attachmentUrl&&r.a.createElement("img",{src:t.attachmentUrl,width:"300px"}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:d},"\u6d88\u3059"),r.a.createElement("button",{onClick:b},"\u7de8\u96c6"))))},A=function(e){var t=e.userObj,a=e.refreshUser,c=Object(n.useState)(t.displayName),u=Object(l.a)(c,2),i=u[0],o=u[1],s=Object(n.useState)([]),m=Object(l.a)(s,2),f=m[0],p=m[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),E=b[0],v=b[1];Object(n.useEffect)((function(){j.collection("mwits").where("creatorId","==",t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(U.a)({id:e.id},e.data())}));p(t)}))}),[t]);var h=function(){return v((function(e){return!e}))},g=function(){var e=Object(k.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===i){e.next=5;break}return e.next=4,t.updateProfile({displayName:i});case 4:a();case 5:h();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null,r.a.createElement("title",null,"Profile | Mamabal")),E?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:g},r.a.createElement("input",{onChange:function(e){var t=e.currentTarget.value;o(t)},value:i,placeholder:"\u540d\u524d\u7de8\u96c6",type:"text"}),r.a.createElement("input",{type:"submit",value:"\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8"})),r.a.createElement("button",{onClick:h},"\u30ad\u30e3\u30f3\u30bb\u30eb")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:h},"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8")),f.map((function(e){return r.a.createElement(M,{key:e.id,mwitObj:e,isOwner:e.creatorId===t.uid})})),r.a.createElement("button",{onClick:function(){O.signOut(),window.location.reload()}},"Logout"))};function F(){var e=Object(p.a)(["\n  font-size: 50px;\n  font-weight: 600;\n"]);return F=function(){return e},e}function D(){var e=Object(p.a)(["\n  font-size: 80px;\n  font-weight: 700;\n  margin-bottom: 20px;\n"]);return D=function(){return e},e}function N(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]);return N=function(){return e},e}var L=i.default.div(N()),z=i.default.div(D()),T=i.default.div(F()),q=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),i=Object(l.a)(u,2),o=i[0],s=i[1],m=Object(n.useState)(""),f=Object(l.a)(m,2),p=f[0],d=f[1],b=Object(n.useState)(""),E=Object(l.a)(b,2),v=E[0],h=E[1],O=function(){var e=Number(new Date("2019-02-01:00:00:00+0900"))-Number(new Date),t=Math.abs(Math.floor(e/864e5)),a=Math.abs(Math.floor(e%864e5/36e5))-1,n=Math.abs(Math.floor(e%36e5/6e4))-1,r=Math.abs(Math.floor(e%6e4/1e3))-1,u="".concat(t<10?"0".concat(t):t),l="".concat(a<10?"0".concat(a):a),i="".concat(n<10?"0".concat(n):n),o="".concat(r<10?"0".concat(r):r);c(u),s(l),d(i),h(o)};return Object(n.useEffect)((function(){var e=setInterval(O,1e3);return function(){clearInterval(e)}}),[]),r.a.createElement(L,null,r.a.createElement(z,null,"\u51fa\u4f1a\u3063\u3066\u304b\u3089"),r.a.createElement(T,null,a,"\u65e5 ",o,"\u6642 ",p,"\u5206 ",v,"\u79d2"))},B=a(54),R=function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(l.a)(a,2),u=c[0],i=c[1],o=Object(n.useState)([]),s=Object(l.a)(o,2),m=s[0],f=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),b=d[0],E=d[1];Object(n.useEffect)((function(){j.collection("mwits").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(U.a)({id:e.id},e.data())}));f(t)}))}),[]);var v=function(){var e=Object(k.a)(S.a.mark((function e(a){var n,r,c,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n="",""===b){e.next=10;break}return r=g.ref().child("".concat(t.uid,"/").concat(Object(B.a)())),e.next=6,r.putString(b,"data_url");case 6:return c=e.sent,e.next=9,c.ref.getDownloadURL();case 9:n=e.sent;case 10:return l={text:u,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:n},e.next=13,j.collection("mwits").add(l);case 13:i(""),E("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null,r.a.createElement("title",null,"Home | Mamabal")),r.a.createElement(q,null),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{value:u,onChange:function(e){var t=e.currentTarget.value;i(t)},type:"text",placeholder:"\u3053\u3053\u306b\u5185\u5bb9\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044"}),r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.currentTarget.files;if(t){var a=t[0],n=new FileReader;n.onloadend=function(e){var t,a=null===(t=e.target)||void 0===t?void 0:t.result;E(a)},n.readAsDataURL(a)}}}),r.a.createElement("input",{type:"submit",value:"Mwit"}),b&&r.a.createElement("div",null,r.a.createElement("img",{src:b,width:"300px"}),r.a.createElement("button",{onClick:function(){return E(null)}},"Clear"))),r.a.createElement("div",null,m.map((function(e){return r.a.createElement(M,{key:e.id,mwitObj:e,isOwner:e.creatorId===t.uid})})))))},J=function(e){var t=e.refreshUser,a=e.isLoggedIn,n=e.userObj;return r.a.createElement(w.a,null,a&&r.a.createElement(P,{userObj:n}),r.a.createElement(x.d,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.b,{exact:!0,path:"/"},r.a.createElement(R,{userObj:n})),r.a.createElement(x.b,{exact:!0,path:"/profile"},r.a.createElement(A,{userObj:n,refreshUser:t})),r.a.createElement(x.a,{from:"*",to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(x.b,{exact:!0,path:"/"},r.a.createElement(I,null)),r.a.createElement(x.a,{from:"*",to:"/"}))))};function G(){var e=Object(p.a)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  justify-content: center;\n  font-size: 28px;\n  margin-top: 20px;\n"]);return G=function(){return e},e}var K=i.default.div(G()),W=function(){return r.a.createElement(K,null,r.a.createElement("span",{role:"img","aria-label":"Loading"},"\u23f0"))},H=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(null),i=Object(l.a)(u,2),o=i[0],s=i[1];Object(n.useEffect)((function(){O.onAuthStateChanged((function(e){e&&s({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}),c(!0)}))}),[]);return r.a.createElement(m,{theme:f},a?r.a.createElement(J,{refreshUser:function(){var e=O.currentUser;e&&s({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(o),userObj:o}):r.a.createElement(W,null),r.a.createElement(E,null))};u.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.8207b693.chunk.js.map