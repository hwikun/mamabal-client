(this["webpackJsonpmamabal-client"]=this["webpackJsonpmamabal-client"]||[]).push([[0],{45:function(e,t,n){e.exports=n(61)},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),u=n.n(c),l=n(13),i=n(2),o=i,f=(o.default,o.css,o.createGlobalStyle),s=(o.keyframes,o.ThemeProvider),m={blueColor:"#3498db"},d=n(3),p=n(42);function b(){var e=Object(d.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Kosugi&display=swap');\n  ","\n  * {\n    font-family: 'Kosugi', sans-serif;\n    box-sizing: border-box;\n  }\n  #root {\n    padding: 20px 5%;\n    display:flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"]);return b=function(){return e},e}var v=f(b(),p.a),j=n(18);n(51),n(53),n(62);j.initializeApp({apiKey:"AIzaSyCzPqJU3h1OlQPwoJq5ZhP7MeDwac_3zvs",authDomain:"mamabal.firebaseapp.com",databaseURL:"https://mamabal.firebaseio.com",projectId:"mamabal",storageBucket:"mamabal.appspot.com",messagingSenderId:"545806454842",appId:"1:545806454842:web:c825648cfbb1fd47436503"});var E=j,O=j.auth(),g=j.firestore(),h=j.storage(),x=n(22),w=n(4),y=n(16),S=n(17),k=n.n(S),C=n(25),I=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),o=i[0],f=i[1],s=Object(a.useState)(!0),m=Object(l.a)(s,2),d=m[0],p=m[1],b=Object(a.useState)(""),v=Object(l.a)(b,2),j=v[0],E=v[1],g=function(e){var t=e.currentTarget,n=t.name,a=t.value;"email"===n?c(a):"password"===n&&f(a)},h=function(){var e=Object(C.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(n,o);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(n,o);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),E(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:h},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:g}),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:g}),r.a.createElement("input",{type:"submit",value:d?"\u65b0\u898f\u53d6\u5f97":"\u30ed\u30b0\u30a4\u30f3"}),j&&r.a.createElement("span",null,j)),r.a.createElement("span",{onClick:function(){return p((function(e){return!e}))}},d?"\u30ed\u30b0\u30a4\u30f3":"\u65b0\u898f\u53d6\u5f97"))},P=function(){var e=function(){var e=Object(C.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.currentTarget.name&&(n=new E.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("button",{onClick:e,name:"google"},"Continue with Google"))},U=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,"Login | Mamabal")),r.a.createElement(I,null),r.a.createElement(P,null))};function N(){var e=Object(d.a)([""]);return N=function(){return e},e}function M(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n"]);return M=function(){return e},e}function z(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  margin-bottom: 20px;\n"]);return z=function(){return e},e}var A=i.default.nav(z()),F=i.default.ul(M()),L=i.default.li(N()),D=function(e){var t=e.userObj;return r.a.createElement(A,null,r.a.createElement(F,null,r.a.createElement(L,null,r.a.createElement(x.b,{to:"/"},"\u30db\u30fc\u30e0")),r.a.createElement(L,null,r.a.createElement(x.b,{to:"/profile"},t.displayName?"".concat(t.displayName,"\u306e \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"):"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"))))},T=n(10),q=n.n(T),B=n(15),R=n(26),J=n(5),K=n(21),G=n.n(K),W=n(34),_=n(32);function H(){var e=Object(d.a)(["\n  margin-right: 0.5em;\n"]);return H=function(){return e},e}function Q(){var e=Object(d.a)(["\n  margin-top: 10px;\n  border-radius: 15px;\n  align-self: center;\n"]);return Q=function(){return e},e}function Z(){var e=Object(d.a)([""]);return Z=function(){return e},e}function V(){var e=Object(d.a)([""]);return V=function(){return e},e}function X(){var e=Object(d.a)(['\n  width: 100%;\n  font-size: 1.1em;\n  display: flex;\n  justify-content: space-between;\n  font-family: "Kosugi";\n']);return X=function(){return e},e}function Y(){var e=Object(d.a)(["\n  font-size: 0.9em;\n  font-weight: 400;\n  margin-left: 5px;\n"]);return Y=function(){return e},e}function $(){var e=Object(d.a)(["\n  font-size: 0.9em;\n  font-weight: 700;\n"]);return $=function(){return e},e}function ee(){var e=Object(d.a)(["\n  margin-bottom: 10px;\n  display: flex;\n  justify-content: space-between;\n"]);return ee=function(){return e},e}function te(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,\n    rgba(0, 0, 0, 0.3) 0px 8px 16px -8px,\n    rgba(0, 0, 0, 0.024) 0px -6px 16px -6px;\n  padding: 1em;\n  border-radius: 20px;\n"]);return te=function(){return e},e}function ne(){var e=Object(d.a)([""]);return ne=function(){return e},e}function ae(){var e=Object(d.a)([""]);return ae=function(){return e},e}function re(){var e=Object(d.a)([""]);return re=function(){return e},e}function ce(){var e=Object(d.a)([""]);return ce=function(){return e},e}function ue(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px;\n  width: 100%;\n"]);return ue=function(){return e},e}var le=i.default.div(ue()),ie=i.default.form(ce()),oe=i.default.button(re()),fe=i.default.input(ae()),se=i.default.input(ne()),me=i.default.div(te()),de=i.default.div(ee()),pe=i.default.span($()),be=i.default.span(Y()),ve=i.default.div(X()),je=i.default.span(V()),Ee=i.default.span(Z()),Oe=i.default.img(Q()),ge=i.default.span(H()),he=function(e){var t=e.mwitObj,n=e.isOwner,c=Object(a.useState)(!1),u=Object(J.a)(c,2),l=u[0],i=u[1],o=Object(a.useState)(t.text),f=Object(J.a)(o,2),s=f[0],m=f[1],d=function(){var e=Object(B.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u672c\u5f53\u306b\u53d6\u308a\u6d88\u3057\u307e\u3059\u304b\uff1f")){e.next=6;break}return e.next=4,g.doc("mwits/".concat(t.id)).delete();case 4:return e.next=6,h.refFromURL(t.attachmentUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return i((function(e){return!e}))},b=function(){var e=Object(B.a)(q.a.mark((function e(n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g.doc("mwits/".concat(t.id)).update({text:s});case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(le,null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{onSubmit:b},r.a.createElement(fe,{type:"text",placeholder:"\u66f4\u65b0\u5185\u5bb9",value:s,required:!0,onChange:function(e){var t=e.currentTarget.value;m(t)}}),r.a.createElement(se,{type:"submit",value:"\u7de8\u96c6"}),r.a.createElement(oe,{onClick:p},"\u30ad\u30e3\u30f3\u30bb\u30eb"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(me,null,r.a.createElement(de,null,r.a.createElement(pe,null,t.displayName,r.a.createElement(be,null,G()(t.createdAt).format().replace("T"," ").replace("+09:00",""))),r.a.createElement(Ee,null,n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{onClick:d},r.a.createElement(_.a,{icon:W.b})),r.a.createElement(ge,{onClick:p},r.a.createElement(_.a,{icon:W.a}))))),r.a.createElement(ve,null,r.a.createElement(je,null,t.text)),t.attachmentUrl&&r.a.createElement(Oe,{src:t.attachmentUrl,width:"80%"}))))};function xe(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return xe=function(){return e},e}function we(){var e=Object(d.a)(["\n  width: 50%;\n  display: flex;\n  justify-content: space-around;\n"]);return we=function(){return e},e}var ye=i.default.span(we()),Se=i.default.div(xe()),ke=function(e){var t=e.userObj,n=e.refreshUser,c=Object(a.useState)(t.displayName),u=Object(J.a)(c,2),l=u[0],i=u[1],o=Object(a.useState)([]),f=Object(J.a)(o,2),s=f[0],m=f[1],d=Object(a.useState)(!1),p=Object(J.a)(d,2),b=p[0],v=p[1];Object(a.useEffect)((function(){g.collection("mwits").where("creatorId","==",t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(R.a)({id:e.id},e.data())}));m(t)}))}),[t]);var j=function(){return v((function(e){return!e}))},E=function(){var e=Object(B.a)(q.a.mark((function e(a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t.displayName===l){e.next=5;break}return e.next=4,t.updateProfile({displayName:l});case 4:n();case 5:j();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,"Profile | Mamabal")),b?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{onChange:function(e){var t=e.currentTarget.value;i(t)},value:l,placeholder:"\u540d\u524d\u7de8\u96c6",type:"text"}),r.a.createElement("input",{type:"submit",value:"\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8"})),r.a.createElement("button",{onClick:j},"\u30ad\u30e3\u30f3\u30bb\u30eb")):r.a.createElement(ye,null,r.a.createElement("button",{onClick:j},"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8"),r.a.createElement("button",{onClick:function(){O.signOut(),window.location.reload()}},"Logout")),r.a.createElement(Se,null,s.map((function(e){return r.a.createElement(he,{key:e.id,mwitObj:e,isOwner:e.creatorId===t.uid})}))))};function Ce(){var e=Object(d.a)(["\n  font-size: 1.8em;\n  font-weight: 500;\n"]);return Ce=function(){return e},e}function Ie(){var e=Object(d.a)(["\n  font-size: 3em;\n  font-weight: 700;\n  margin-bottom: 20px;\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(d.a)(["\n  padding: 1em;\n  height: 10em;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]);return Pe=function(){return e},e}var Ue=i.default.div(Pe()),Ne=i.default.div(Ie()),Me=i.default.div(Ce()),ze=function(){var e=Object(a.useState)(""),t=Object(J.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(J.a)(u,2),i=l[0],o=l[1],f=Object(a.useState)(""),s=Object(J.a)(f,2),m=s[0],d=s[1],p=Object(a.useState)(""),b=Object(J.a)(p,2),v=b[0],j=b[1],E=function(){var e=Number(G()("2019-02-01:00:00:00+0900"))-Number(G()()),t=Math.abs(Math.floor(e/864e5)),n=Math.abs(Math.floor(e%864e5/36e5))-1,a=Math.abs(Math.floor(e%36e5/6e4))-1,r=Math.abs(Math.floor(e%6e4/1e3))-1,u="".concat(t<10?"0".concat(t):t),l="".concat(n<10?"0".concat(n):n),i="".concat(a<10?"0".concat(a):a),f="".concat(r<10?"0".concat(r):r);c(u),o(l),d(i),j(f)};return Object(a.useEffect)((function(){var e=setInterval(E,1e3);return function(){clearInterval(e)}}),[]),r.a.createElement(Ue,null,r.a.createElement(Ne,null,"\u51fa\u4f1a\u3063\u3066\u304b\u3089"),r.a.createElement(Me,null,n,"\u65e5 ",i,"\u6642 ",m,"\u5206 ",v,"\u79d2"))},Ae=n(64);function Fe(){var e=Object(d.a)([""]);return Fe=function(){return e},e}function Le(){var e=Object(d.a)([""]);return Le=function(){return e},e}function De(){var e=Object(d.a)([""]);return De=function(){return e},e}function Te(){var e=Object(d.a)([""]);return Te=function(){return e},e}function qe(){var e=Object(d.a)(["\n  border: none;\n  width: 100%;\n  border-radius: 0px;\n  margin-bottom: 10px;\n"]);return qe=function(){return e},e}function Be(){var e=Object(d.a)([""]);return Be=function(){return e},e}function Re(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Re=function(){return e},e}function Je(){var e=Object(d.a)(["\n  position: fixed;\n  bottom: 0px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fd79a8;\n  width: 100vw;\n  padding: 1em;\n"]);return Je=function(){return e},e}var Ke=i.default.div(Je()),Ge=i.default.div(Re()),We=i.default.form(Be()),_e=i.default.input(qe()),He=(i.default.input(Te()),i.default.input(De())),Qe=i.default.div(Le()),Ze=i.default.button(Fe()),Ve=function(e){var t=e.userObj,n=Object(a.useState)(""),c=Object(J.a)(n,2),u=c[0],l=c[1],i=Object(a.useState)(""),o=Object(J.a)(i,2),f=o[0],s=o[1],m=function(){var e=Object(B.a)(q.a.mark((function e(n){var a,r,c,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a="",""===f){e.next=10;break}return r=h.ref().child("".concat(t.uid,"/").concat(Object(Ae.a)())),e.next=6,r.putString(f,"data_url");case 6:return c=e.sent,e.next=9,c.ref.getDownloadURL();case 9:a=e.sent;case 10:return i={text:u,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:a,displayName:t.displayName},e.next=13,g.collection("mwits").add(i);case 13:l(""),s("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ke,null,r.a.createElement(We,{onSubmit:m},r.a.createElement(Ge,null,r.a.createElement(_e,{value:u,onChange:function(e){var t=e.currentTarget.value;l(t)},type:"text",placeholder:"\u3053\u3053\u306b\u5185\u5bb9\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044"}),r.a.createElement(He,{type:"submit"})),r.a.createElement(He,{type:"file",accept:"image/*",onChange:function(e){var t=e.currentTarget.files;if(t){var n=t[0],a=new FileReader;a.onloadend=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;s(n)},a.readAsDataURL(n)}}}),f&&r.a.createElement(Qe,null,r.a.createElement("img",{src:f,width:"300px"}),r.a.createElement(Ze,{onClick:function(){return s(null)}},"Clear"))))};function Xe(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-self: center;\n"]);return Xe=function(){return e},e}function Ye(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ye=function(){return e},e}var $e=i.default.div(Ye()),et=i.default.div(Xe()),tt=function(e){var t=e.userObj,n=Object(a.useState)([]),c=Object(J.a)(n,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){g.collection("mwits").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(R.a)({id:e.id},e.data())}));l(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,"Home | Mamabal")),r.a.createElement($e,null,r.a.createElement(ze,null),r.a.createElement(et,null,u.map((function(e){return r.a.createElement(he,{key:e.id,mwitObj:e,isOwner:e.creatorId===t.uid})})))),r.a.createElement(Ve,{userObj:t}))},nt=function(e){var t=e.refreshUser,n=e.isLoggedIn,a=e.userObj;return r.a.createElement(x.a,null,n&&r.a.createElement(D,{userObj:a}),r.a.createElement(w.d,null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{exact:!0,path:"/"},r.a.createElement(tt,{userObj:a})),r.a.createElement(w.b,{exact:!0,path:"/profile"},r.a.createElement(ke,{userObj:a,refreshUser:t})),r.a.createElement(w.a,{from:"*",to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{exact:!0,path:"/"},r.a.createElement(U,null)),r.a.createElement(w.a,{from:"*",to:"/"}))))};function at(){var e=Object(d.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 28px;\n"]);return at=function(){return e},e}var rt=i.default.div(at()),ct=function(){return r.a.createElement(rt,null,r.a.createElement("span",{role:"img","aria-label":"Loading"},"Loading...\u23f0"))},ut=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(null),i=Object(l.a)(u,2),o=i[0],f=i[1];Object(a.useEffect)((function(){O.onAuthStateChanged((function(e){e&&f({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}),c(!0)}))}),[]);return r.a.createElement(s,{theme:m},n?r.a.createElement(nt,{refreshUser:function(){var e=O.currentUser;e&&f({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(o),userObj:o}):r.a.createElement(ct,null),r.a.createElement(v,null))};u.a.render(r.a.createElement(ut,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.0e363fde.chunk.js.map